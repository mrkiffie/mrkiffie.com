'use strict';var version='v1.0.1::';var staticCacheName=version+'static';var pagesCacheName=version+'pages';var imagesCacheName=version+'images';var updateStaticCache=function updateStaticCache(){return caches.open(staticCacheName).then(function(cache){cache.addAll(['/about/']);return cache.addAll(['/assets/css/styles-e0c5db6f0b73c58b432286fb1d006868.css','/assets/css/prism-9447029b855d2852d32e461a8c0f5729.css','/assets/css/fancy-quotes-b49d96fdd613180d167a875328fd7743.css','/assets/img/kiffie-144x144-84eee0bbb8fea04de91bbd15bdd31fc2.jpg','/assets/img/offline-8e184112da766b2d403b8b0f3bad1fcb.svg','/assets/js/main-32ce3efb9c984dcd0f12c254d011c135.js','/assets/js/offline-1589d179704cc35d6c8be4faae39e4ea.js','/','/offline/'])})};var stashInCache=function stashInCache(cacheName,request,response){if(response.status===200){caches.open(cacheName).then(function(cache){return cache.put(request,response)})}};var trimCache=function trimCache(cacheName,maxItems){caches.open(cacheName).then(function(cache){cache.keys().then(function(keys){if(keys.length>maxItems){cache.delete(keys[0]).then(trimCache(cacheName,maxItems))}})})};var clearOldCaches=function clearOldCaches(){return caches.keys().then(function(keys){return Promise.all(keys.filter(function(key){return!key.includes(version)}).map(function(key){return caches.delete(key)}))})};self.addEventListener('install',function(event){event.waitUntil(updateStaticCache().then(function(){return self.skipWaiting()}))});self.addEventListener('activate',function(event){event.waitUntil(clearOldCaches().then(function(){return self.clients.claim()}))});self.addEventListener('message',function(event){if(event.data.command==='trimCaches'){trimCache(pagesCacheName,25);trimCache(imagesCacheName,15)}});self.addEventListener('fetch',function(event){var request=event.request;var url=new URL(request.url);if(url.origin!==location.origin){return}if(request.headers.get('Accept').includes('text/html')){request=new Request(url,{method:'GET',headers:request.headers,mode:request.mode==='navigate'?'cors':request.mode,credentials:request.credentials,redirect:request.redirect});event.respondWith(fetch(request).then(function(response){stashInCache(pagesCacheName,request,response.clone());return response}).catch(function(){return caches.match(request).then(function(response){return response||caches.match('/offline/')})}));return}event.respondWith(caches.match(request).then(function(response){return response||fetch(request).then(function(response){if(request.headers.get('Accept').includes('image')){stashInCache(imagesCacheName,request,response.clone())}return response}).catch(function(){if(request.headers.get('Accept').includes('image')){return caches.match('/assets/img/offline-8e184112da766b2d403b8b0f3bad1fcb.svg')}})}))});
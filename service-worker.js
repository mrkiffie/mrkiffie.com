'use strict';var version='v1.0.0::';var staticCacheName=version+'static';var pagesCacheName=version+'pages';var imagesCacheName=version+'images';function updateStaticCache(){return caches.open(staticCacheName).then(function(cache){cache.addAll(['/about/']);return cache.addAll(['/assets/css/styles-e1534e338bd1dccc27b78e3447a8bf0a.css','/assets/css/prism-0b5b171f3e7a65dc20dfe14fea81d83f.css','/assets/css/fancy-quotes-2ace9dc0eff0e95e670a6a4e3710941e.css','/assets/img/kiffie-331e39a08b644e1226a240c052780d69.jpg','/assets/img/offline-8e184112da766b2d403b8b0f3bad1fcb.svg','/assets/js/main-86dcd09ef150f541e3afa2c9e9a30a26.js','/assets/js/offline-f6f2722e3ec104f9318b50bb0d66c1db.js','/','/offline/'])})}function stashInCache(cacheName,request,response){if(response.status===200){caches.open(cacheName).then(function(cache){return cache.put(request,response)})}}function trimCache(cacheName,maxItems){caches.open(cacheName).then(function(cache){cache.keys().then(function(keys){if(keys.length>maxItems){cache.delete(keys[0]).then(trimCache(cacheName,maxItems))}})})}function clearOldCaches(){return caches.keys().then(function(keys){return Promise.all(keys.filter(function(key){return key.indexOf(version)!==0}).map(function(key){return caches.delete(key)}))})}self.addEventListener('install',function(event){event.waitUntil(updateStaticCache().then(function(){return self.skipWaiting()}))});self.addEventListener('activate',function(event){event.waitUntil(clearOldCaches().then(function(){return self.clients.claim()}))});self.addEventListener('message',function(event){if(event.data.command=='trimCaches'){trimCache(pagesCacheName,25);trimCache(imagesCacheName,15)}});self.addEventListener('fetch',function(event){var request=event.request;var url=new URL(request.url);if(url.origin!==location.origin){return}if(request.headers.get('Accept').indexOf('text/html')!==-1){request=new Request(url,{method:'GET',headers:request.headers,mode:request.mode=='navigate'?'cors':request.mode,credentials:request.credentials,redirect:request.redirect});event.respondWith(fetch(request).then(function(response){var copy=response.clone();stashInCache(pagesCacheName,request,copy);return response}).catch(function(){return caches.match(request).then(function(response){return response||caches.match('/offline/')})}));return}event.respondWith(caches.match(request).then(function(response){return response||fetch(request).then(function(response){if(request.headers.get('Accept').indexOf('image')!==-1){var copy=response.clone();stashInCache(imagesCacheName,request,copy)}return response}).catch(function(){if(request.headers.get('Accept').indexOf('image')!==-1){return caches.match('/assets/img/offline-8e184112da766b2d403b8b0f3bad1fcb.svg')}})}))});